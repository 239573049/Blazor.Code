@inject KeyEventBus<string> KeyEventBus

<MExpansionPanels>
    @foreach (var masa in components)
    {
        <MExpansionPanel>
            <MExpansionPanelHeader>
                @masa.Title
            </MExpansionPanelHeader>
            <MExpansionPanelContent>
                @if (masa.Childrens.Count > 0)
                {
                    <MExpansionPanels>
                        @foreach (var a in masa.Childrens)
                        {
                            <MExpansionPanel>
                                <MExpansionPanelHeader>
                                    @a.Title
                                </MExpansionPanelHeader>
                                <MExpansionPanelContent>
                                    <MButton OnClick="() => GoPreview(a.Data)">预览</MButton>
                                </MExpansionPanelContent>
                            </MExpansionPanel>
                        }
                    </MExpansionPanels>
                }
                else
                {
                    <MButton OnClick="() => GoPreview(masa.Data)">预览</MButton>
                }
            </MExpansionPanelContent>
        </MExpansionPanel>
    }
</MExpansionPanels>

@code {
    private static List<ComponentList> components = new List<ComponentList>();

    protected override void OnInitialized()
    {
        components.Add(new ComponentList()
        {
            Title = "Alerts（提示框）",
            Childrens = new List<ComponentList>()
            {
                new("Type", "/masa/alerts/Type"),
                new("Twitter", "/masa/alerts/Twitter"),
                new("Transition", "/masa/alerts/Transition"),
                new("Text", "/masa/alerts/Text"),
                new("Shaped", "/masa/alerts/Shaped")
            }
        });
        
        components.Add(new ComponentList()
        {
            Title = "Buttons（按钮）",
            Childrens = new List<ComponentList>()
            {
                new("Block", "/masa/buttons/Block"),
                new("Depressed", "/masa/buttons/Depressed"),
                new("Floating", "/masa/buttons/Floating"),
                new("Icon", "/masa/buttons/Icon"),
                new("Index", "/masa/buttons/Index"),
                new("Loaders", "/masa/buttons/Loaders"),
                new("Outlined", "/masa/buttons/Outlined"),
                new("Plain", "/masa/buttons/Plain"),
                new("Raised", "/masa/buttons/Raised"),
                new("Rounded", "/masa/buttons/Rounded"),
                new("Size", "/masa/buttons/Size"),
                new("Text", "/masa/buttons/Text"),
                new("Tile", "/masa/buttons/Tile"),
            }
        });

        components.Add(new ComponentList()
        {
            Title = "Drawers（抽屉）",
            Childrens = new List<ComponentList>()
            {
                new("ChildContent", "/masa/dividers/ChildContent"),
                new("Index", "/masa/dividers/Index"),
                new("Inset", "/masa/dividers/Inset"),
                new("SubHeaders", "/masa/buttons/SubHeaders"),
                new("Vertical", "/masa/buttons/Vertical"),
                new("View", "/masa/buttons/View")
            }
        });
        
        components.Add(new ComponentList()
        {
            Title = "DragZone（拖放）",
            Childrens = new List<ComponentList>()
            {
                new("Clone", "/masa/dragZone/Clone"),
                new("Filter", "/masa/dragZone/Filter"),
                new("Group", "/masa/dragZone/Group"),
                new("MultiyZone", "/masa/dragZone/MultiyZone"),
                new("Pull", "/masa/dragZone/Pull"),
                new("Put", "/masa/dragZone/Put"),
                new("Sort", "/masa/dragZone/Sort"),
                new("Usage", "/masa/dragZone/Usage"),
                new("Options", "/masa/dragZone/Options")
            }
        });

        components.Add(new ComponentList()
        {
            Title = "Tabs（选项卡）",
            Childrens = new List<ComponentList>()
            {
                new("AlignWithTitle", "/masa/tabs/AlignWithTitle"),
                new("CenterActive", "/masa/tabs/CenterActive"),
                new("Content", "/masa/tabs/Content"),
                new("CustomIcons", "/masa/tabs/CustomIcons"),
                new("DesktopTabs", "/masa/tabs/DesktopTabs"),
                new("DynamicHeight", "/masa/tabs/DynamicHeight"),
                new("DynamicTabs", "/masa/tabs/DynamicTabs"),
                new("FixedTabs", "/masa/tabs/FixedTabs"),
                new("Grow", "/masa/tabs/Grow"),
                new("IconAndText", "/masa/tabs/IconAndText"),
                new("Pagination", "/masa/tabs/Pagination"),
                new("Right", "/masa/tabs/Right"),
                new("TabItems", "/masa/tabs/TabItems"),
                new("Usage", "/masa/tabs/Usage"),
                new("VerticalTabs", "/masa/tabs/VerticalTabs"),
                new("OverflowToMenu", "/masa/tabs/OverflowToMenu")
            }
        });

        components.Add(new ComponentList()
        {
            Title = "Toolbars（工具栏）",
            Childrens = new List<ComponentList>()
            {
                new("Background", "/masa/toolbars/Background"),
                new("Collapse", "/masa/toolbars/Collapse"),
                new("ContextualActionBar", "/masa/toolbars/ContextualActionBar"),
                new("DenseToolbars", "/masa/toolbars/DenseToolbars"),
                new("Extended", "/masa/toolbars/Extended"),
                new("ExtensitionHeight", "/masa/toolbars/ExtensitionHeight"),
                new("FlexibleAndCardToolbar", "/masa/toolbars/FlexibleAndCardToolbar"),
                new("FloatingWithSearch", "/masa/toolbars/FloatingWithSearch"),
                new("LightAndDark", "/masa/toolbars/LightAndDark"),
                new("ProminentToolbars", "/masa/toolbars/ProminentToolbars"),
                new("Variations", "/masa/toolbars/Variations")
            }
        });
        
        
        components.Add(new ComponentList()
        {
            Title = "Bottom navigation (底部导航栏)",
            Childrens = new List<ComponentList>()
            {
                new("Color", "/masa/bottomNavigation/Color"),
                new("Grow", "/masa/bottomNavigation/Grow"),
                new("HideOnScroll", "/masa/bottomNavigation/HideOnScroll"),
                new("Horizontal", "/masa/bottomNavigation/Horizontal"),
                new("ScrollThreshold", "/masa/bottomNavigation/ScrollThreshold"),
                new("Shift", "/masa/bottomNavigation/Shift"),
                new("Toggle", "/masa/bottomNavigation/Toggle"),
                new("UsageTemplate", "/masa/bottomNavigation/UsageTemplate")
            }
        });

        components.Add(new ComponentList()
        {
            Title = "Tooltips（工具提示）",
            Childrens = new List<ComponentList>()
            {
                new("Alignment", "/masa/tooltips/Alignment"),
                new("Usage", "/masa/tooltips/Usage"),
                new("Visibility", "/masa/tooltips/Visibility")
            }
        });
        components.Add(new ComponentList()
        {
            Title = "Treeview（树形视图）",
            Childrens = new List<ComponentList>()
            {
                new("Activatable", "/masa/treeview/Activatable"),
                new("AppendAndLabel", "/masa/treeview/AppendAndLabel"),
                new("Color", "/masa/treeview/Color"),
                new("Dense", "/masa/treeview/Dense"),
                new("Hoverable", "/masa/treeview/Hoverable"),
                new("ItemDisabled", "/masa/treeview/ItemDisabled"),
                new("LoadChildren", "/masa/treeview/LoadChildren"),
                new("OpenAll", "/masa/treeview/OpenAll"),
                new("Rounded", "/masa/treeview/Rounded"),
                new("SearchAndFilter", "/masa/treeview/SearchAndFilter"),
                new("SelectableIcons", "/masa/treeview/SelectableIcons"),
                new("SelectColor", "/masa/treeview/SelectColor"),
                new("SelectType", "/masa/treeview/SelectType"),
                new("Shaped", "/masa/treeview/Shaped"),
                new("Usage", "/masa/treeview/Usage")
            }
        });


        base.OnInitialized();
    }

    private async Task GoPreview(string type)
    {
        await KeyEventBus.PushAsync("preview-masa", type);
    }

}